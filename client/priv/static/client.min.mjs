var _=class{withFields(t){let r=Object.keys(this).map(n=>n in t?t[n]:this[n]);return new this.constructor(...r)}},me=class{static fromArray(t,r){let n=r||new w;for(let i=t.length-1;i>=0;--i)n=new he(t[i],n);return n}[Symbol.iterator](){return new Tn(this)}toArray(){return[...this]}atLeastLength(t){let r=this;for(;t-- >0&&r;)r=r.tail;return r!==void 0}hasLength(t){let r=this;for(;t-- >0&&r;)r=r.tail;return t===-1&&r instanceof w}countLength(){let t=this,r=0;for(;t;)t=t.tail,r++;return r-1}};function p(e,t){return new he(e,t)}function d(e,t){return me.fromArray(e,t)}var Tn=class{#e;constructor(t){this.#e=t}next(){if(this.#e instanceof w)return{done:!0};{let{head:t,tail:r}=this.#e;return this.#e=r,{value:t,done:!1}}}},w=class extends me{},he=class extends me{constructor(t,r){super(),this.head=t,this.tail=r}},nr=class{bitSize;byteSize;bitOffset;rawBuffer;constructor(t,r,n){if(!(t instanceof Uint8Array))throw globalThis.Error("BitArray can only be constructed from a Uint8Array");if(this.bitSize=r??t.length*8,this.byteSize=Math.trunc((this.bitSize+7)/8),this.bitOffset=n??0,this.bitSize<0)throw globalThis.Error(`BitArray bit size is invalid: ${this.bitSize}`);if(this.bitOffset<0||this.bitOffset>7)throw globalThis.Error(`BitArray bit offset is invalid: ${this.bitOffset}`);if(t.length!==Math.trunc((this.bitOffset+this.bitSize+7)/8))throw globalThis.Error("BitArray buffer length is invalid");this.rawBuffer=t}byteAt(t){if(!(t<0||t>=this.byteSize))return rr(this.rawBuffer,this.bitOffset,t)}equals(t){if(this.bitSize!==t.bitSize)return!1;let r=Math.trunc(this.bitSize/8);if(this.bitOffset===0&&t.bitOffset===0){for(let i=0;i<r;i++)if(this.rawBuffer[i]!==t.rawBuffer[i])return!1;let n=this.bitSize%8;if(n){let i=8-n;if(this.rawBuffer[r]>>i!==t.rawBuffer[r]>>i)return!1}}else{for(let i=0;i<r;i++){let s=rr(this.rawBuffer,this.bitOffset,i),o=rr(t.rawBuffer,t.bitOffset,i);if(s!==o)return!1}let n=this.bitSize%8;if(n){let i=rr(this.rawBuffer,this.bitOffset,r),s=rr(t.rawBuffer,t.bitOffset,r),o=8-n;if(i>>o!==s>>o)return!1}}return!0}get buffer(){if(xs("buffer","Use BitArray.byteAt() or BitArray.rawBuffer instead"),this.bitOffset!==0||this.bitSize%8!==0)throw new globalThis.Error("BitArray.buffer does not support unaligned bit arrays");return this.rawBuffer}get length(){if(xs("length","Use BitArray.bitSize or BitArray.byteSize instead"),this.bitOffset!==0||this.bitSize%8!==0)throw new globalThis.Error("BitArray.length does not support unaligned bit arrays");return this.rawBuffer.length}};function rr(e,t,r){if(t===0)return e[r]??0;{let n=e[r]<<t&255,i=e[r+1]>>8-t;return n|i}}var $s={};function xs(e,t){$s[e]||(console.warn(`Deprecated BitArray.${e} property used in JavaScript FFI code. ${t}.`),$s[e]=!0)}var Bt=class e extends _{static isResult(t){return t instanceof e}},h=class extends Bt{constructor(t){super(),this[0]=t}isOk(){return!0}},k=class extends Bt{constructor(t){super(),this[0]=t}isOk(){return!1}};function G(e,t){let r=[e,t];for(;r.length;){let n=r.pop(),i=r.pop();if(n===i)continue;if(!ws(n)||!ws(i)||!$l(n,i)||cl(n,i)||pl(n,i)||dl(n,i)||_l(n,i)||ml(n,i)||hl(n,i))return!1;let o=Object.getPrototypeOf(n);if(o!==null&&typeof o.equals=="function")try{if(n.equals(i))continue;return!1}catch{}let[u,l]=fl(n);for(let a of u(n))r.push(l(n,a),l(i,a))}return!0}function fl(e){if(e instanceof Map)return[t=>t.keys(),(t,r)=>t.get(r)];{let t=e instanceof globalThis.Error?["message"]:[];return[r=>[...t,...Object.keys(r)],(r,n)=>r[n]]}}function cl(e,t){return e instanceof Date&&(e>t||e<t)}function pl(e,t){return!(e instanceof nr)&&e.buffer instanceof ArrayBuffer&&e.BYTES_PER_ELEMENT&&!(e.byteLength===t.byteLength&&e.every((r,n)=>r===t[n]))}function dl(e,t){return Array.isArray(e)&&e.length!==t.length}function _l(e,t){return e instanceof Map&&e.size!==t.size}function ml(e,t){return e instanceof Set&&(e.size!=t.size||[...e].some(r=>!t.has(r)))}function hl(e,t){return e instanceof RegExp&&(e.source!==t.source||e.flags!==t.flags)}function ws(e){return typeof e=="object"&&e!==null}function $l(e,t){return typeof e!="object"&&typeof t!="object"&&(!e||!t)||[Promise,WeakSet,WeakMap,Function].some(n=>e instanceof n)?!1:e.constructor===t.constructor}function ir(e,t,r,n,i,s,o){let u=new globalThis.Error(s);u.gleam_error=e,u.file=t,u.module=r,u.line=n,u.function=i,u.fn=i;for(let l in o)u[l]=o[l];return u}var E=class extends _{constructor(t){super(),this[0]=t}},W=class extends _{};function Cn(e,t){if(e instanceof E){let r=e[0];return new h(r)}else return new k(t)}function Br(e,t){return e instanceof E?e[0]:t}var bs=new WeakMap,Bn=new DataView(new ArrayBuffer(8)),On=0;function qn(e){let t=bs.get(e);if(t!==void 0)return t;let r=On++;return On===2147483647&&(On=0),bs.set(e,r),r}function Nn(e,t){return e^t+2654435769+(e<<6)+(e>>2)|0}function Mn(e){let t=0,r=e.length;for(let n=0;n<r;n++)t=Math.imul(31,t)+e.charCodeAt(n)|0;return t}function gs(e){Bn.setFloat64(0,e);let t=Bn.getInt32(0),r=Bn.getInt32(4);return Math.imul(73244475,t>>16^t)^r}function xl(e){return Mn(e.toString())}function wl(e){let t=Object.getPrototypeOf(e);if(t!==null&&typeof t.hashCode=="function")try{let n=e.hashCode(e);if(typeof n=="number")return n}catch{}if(e instanceof Promise||e instanceof WeakSet||e instanceof WeakMap)return qn(e);if(e instanceof Date)return gs(e.getTime());let r=0;if(e instanceof ArrayBuffer&&(e=new Uint8Array(e)),Array.isArray(e)||e instanceof Uint8Array)for(let n=0;n<e.length;n++)r=Math.imul(31,r)+ke(e[n])|0;else if(e instanceof Set)e.forEach(n=>{r=r+ke(n)|0});else if(e instanceof Map)e.forEach((n,i)=>{r=r+Nn(ke(n),ke(i))|0});else{let n=Object.keys(e);for(let i=0;i<n.length;i++){let s=n[i],o=e[s];r=r+Nn(ke(o),Mn(s))|0}}return r}function ke(e){if(e===null)return 1108378658;if(e===void 0)return 1108378659;if(e===!0)return 1108378657;if(e===!1)return 1108378656;switch(typeof e){case"number":return gs(e);case"string":return Mn(e);case"bigint":return xl(e);case"object":return wl(e);case"symbol":return qn(e);case"function":return qn(e);default:return 0}}var qe=5,In=Math.pow(2,qe),bl=In-1,yl=In/2,gl=In/4,fe=0,Oe=1,$e=2,$t=3,Dn={type:$e,bitmap:0,array:[]};function sr(e,t){return e>>>t&bl}function qr(e,t){return 1<<sr(e,t)}function vl(e){return e-=e>>1&1431655765,e=(e&858993459)+(e>>2&858993459),e=e+(e>>4)&252645135,e+=e>>8,e+=e>>16,e&127}function Un(e,t){return vl(e&t-1)}function je(e,t,r){let n=e.length,i=new Array(n);for(let s=0;s<n;++s)i[s]=e[s];return i[t]=r,i}function kl(e,t,r){let n=e.length,i=new Array(n+1),s=0,o=0;for(;s<t;)i[o++]=e[s++];for(i[o++]=r;s<n;)i[o++]=e[s++];return i}function Ln(e,t){let r=e.length,n=new Array(r-1),i=0,s=0;for(;i<t;)n[s++]=e[i++];for(++i;i<r;)n[s++]=e[i++];return n}function vs(e,t,r,n,i,s){let o=ke(t);if(o===n)return{type:$t,hash:o,array:[{type:fe,k:t,v:r},{type:fe,k:i,v:s}]};let u={val:!1};return or(Pn(Dn,e,o,t,r,u),e,n,i,s,u)}function or(e,t,r,n,i,s){switch(e.type){case Oe:return jl(e,t,r,n,i,s);case $e:return Pn(e,t,r,n,i,s);case $t:return Sl(e,t,r,n,i,s)}}function jl(e,t,r,n,i,s){let o=sr(r,t),u=e.array[o];if(u===void 0)return s.val=!0,{type:Oe,size:e.size+1,array:je(e.array,o,{type:fe,k:n,v:i})};if(u.type===fe)return G(n,u.k)?i===u.v?e:{type:Oe,size:e.size,array:je(e.array,o,{type:fe,k:n,v:i})}:(s.val=!0,{type:Oe,size:e.size,array:je(e.array,o,vs(t+qe,u.k,u.v,r,n,i))});let l=or(u,t+qe,r,n,i,s);return l===u?e:{type:Oe,size:e.size,array:je(e.array,o,l)}}function Pn(e,t,r,n,i,s){let o=qr(r,t),u=Un(e.bitmap,o);if((e.bitmap&o)!==0){let l=e.array[u];if(l.type!==fe){let c=or(l,t+qe,r,n,i,s);return c===l?e:{type:$e,bitmap:e.bitmap,array:je(e.array,u,c)}}let a=l.k;return G(n,a)?i===l.v?e:{type:$e,bitmap:e.bitmap,array:je(e.array,u,{type:fe,k:n,v:i})}:(s.val=!0,{type:$e,bitmap:e.bitmap,array:je(e.array,u,vs(t+qe,a,l.v,r,n,i))})}else{let l=e.array.length;if(l>=yl){let a=new Array(32),c=sr(r,t);a[c]=Pn(Dn,t+qe,r,n,i,s);let f=0,x=e.bitmap;for(let v=0;v<32;v++){if((x&1)!==0){let y=e.array[f++];a[v]=y}x=x>>>1}return{type:Oe,size:l+1,array:a}}else{let a=kl(e.array,u,{type:fe,k:n,v:i});return s.val=!0,{type:$e,bitmap:e.bitmap|o,array:a}}}}function Sl(e,t,r,n,i,s){if(r===e.hash){let o=Fn(e,n);if(o!==-1)return e.array[o].v===i?e:{type:$t,hash:r,array:je(e.array,o,{type:fe,k:n,v:i})};let u=e.array.length;return s.val=!0,{type:$t,hash:r,array:je(e.array,u,{type:fe,k:n,v:i})}}return or({type:$e,bitmap:qr(e.hash,t),array:[e]},t,r,n,i,s)}function Fn(e,t){let r=e.array.length;for(let n=0;n<r;n++)if(G(t,e.array[n].k))return n;return-1}function Or(e,t,r,n){switch(e.type){case Oe:return El(e,t,r,n);case $e:return zl(e,t,r,n);case $t:return Al(e,n)}}function El(e,t,r,n){let i=sr(r,t),s=e.array[i];if(s!==void 0){if(s.type!==fe)return Or(s,t+qe,r,n);if(G(n,s.k))return s}}function zl(e,t,r,n){let i=qr(r,t);if((e.bitmap&i)===0)return;let s=Un(e.bitmap,i),o=e.array[s];if(o.type!==fe)return Or(o,t+qe,r,n);if(G(n,o.k))return o}function Al(e,t){let r=Fn(e,t);if(!(r<0))return e.array[r]}function Wn(e,t,r,n){switch(e.type){case Oe:return Tl(e,t,r,n);case $e:return Cl(e,t,r,n);case $t:return Bl(e,n)}}function Tl(e,t,r,n){let i=sr(r,t),s=e.array[i];if(s===void 0)return e;let o;if(s.type===fe){if(!G(s.k,n))return e}else if(o=Wn(s,t+qe,r,n),o===s)return e;if(o===void 0){if(e.size<=gl){let u=e.array,l=new Array(e.size-1),a=0,c=0,f=0;for(;a<i;){let x=u[a];x!==void 0&&(l[c]=x,f|=1<<a,++c),++a}for(++a;a<u.length;){let x=u[a];x!==void 0&&(l[c]=x,f|=1<<a,++c),++a}return{type:$e,bitmap:f,array:l}}return{type:Oe,size:e.size-1,array:je(e.array,i,o)}}return{type:Oe,size:e.size,array:je(e.array,i,o)}}function Cl(e,t,r,n){let i=qr(r,t);if((e.bitmap&i)===0)return e;let s=Un(e.bitmap,i),o=e.array[s];if(o.type!==fe){let u=Wn(o,t+qe,r,n);return u===o?e:u!==void 0?{type:$e,bitmap:e.bitmap,array:je(e.array,s,u)}:e.bitmap===i?void 0:{type:$e,bitmap:e.bitmap^i,array:Ln(e.array,s)}}return G(n,o.k)?e.bitmap===i?void 0:{type:$e,bitmap:e.bitmap^i,array:Ln(e.array,s)}:e}function Bl(e,t){let r=Fn(e,t);if(r<0)return e;if(e.array.length!==1)return{type:$t,hash:e.hash,array:Ln(e.array,r)}}function ks(e,t){if(e===void 0)return;let r=e.array,n=r.length;for(let i=0;i<n;i++){let s=r[i];if(s!==void 0){if(s.type===fe){t(s.v,s.k);continue}ks(s,t)}}}var Re=class e{static fromObject(t){let r=Object.keys(t),n=e.new();for(let i=0;i<r.length;i++){let s=r[i];n=n.set(s,t[s])}return n}static fromMap(t){let r=e.new();return t.forEach((n,i)=>{r=r.set(i,n)}),r}static new(){return new e(void 0,0)}constructor(t,r){this.root=t,this.size=r}get(t,r){if(this.root===void 0)return r;let n=Or(this.root,0,ke(t),t);return n===void 0?r:n.v}set(t,r){let n={val:!1},i=this.root===void 0?Dn:this.root,s=or(i,0,ke(t),t,r,n);return s===this.root?this:new e(s,n.val?this.size+1:this.size)}delete(t){if(this.root===void 0)return this;let r=Wn(this.root,0,ke(t),t);return r===this.root?this:r===void 0?e.new():new e(r,this.size-1)}has(t){return this.root===void 0?!1:Or(this.root,0,ke(t),t)!==void 0}entries(){if(this.root===void 0)return[];let t=[];return this.forEach((r,n)=>t.push([n,r])),t}forEach(t){ks(this.root,t)}hashCode(){let t=0;return this.forEach((r,n)=>{t=t+Nn(ke(r),ke(n))|0}),t}equals(t){if(!(t instanceof e)||this.size!==t.size)return!1;try{return this.forEach((r,n)=>{if(!G(t.get(n,!r),r))throw ys}),!0}catch(r){if(r===ys)return!1;throw r}}},ys=Symbol();var te=class extends _{},re=class extends _{},Ge=class extends _{};var se=class extends _{},wt=class extends _{};function qt(e,t){for(;;){let r=e,n=t;if(r instanceof w)return n;{let i=r.head;e=r.tail,t=p(i,n)}}}function H(e){return qt(e,d([]))}function As(e){if(e instanceof w)return new k(void 0);{let t=e.head;return new h(t)}}function Ul(e,t,r){for(;;){let n=e,i=t,s=r;if(n instanceof w)return H(s);{let o=n.head,u=n.tail,l,a=i(o);if(a instanceof h){let f=a[0];l=p(f,s)}else l=s;let c=l;e=u,t=i,r=c}}}function ur(e,t){return Ul(e,t,d([]))}function Pl(e,t,r){for(;;){let n=e,i=t,s=r;if(n instanceof w)return H(s);{let o=n.head;e=n.tail,t=i,r=p(i(o),s)}}}function Se(e,t){return Pl(e,t,d([]))}function Fl(e,t){for(;;){let r=e,n=t;if(r instanceof w)return n;{let i=r.head;e=r.tail,t=p(i,n)}}}function Le(e,t){return Fl(H(e),t)}function Ae(e,t,r){for(;;){let n=e,i=t,s=r;if(n instanceof w)return i;{let o=n.head;e=n.tail,t=s(i,o),r=s}}}function Gn(e,t,r){if(e instanceof w)return t;{let n=e.head,i=e.tail;return r(Gn(i,t,r),n)}}function Wl(e,t){for(;;){let r=e,n=t;if(r instanceof w)return new k(void 0);{let i=r.head,s=r.tail,o=n(i);if(o instanceof h){let u=o[0];return new h(u)}else e=s,t=n}}}function Rl(e,t,r,n,i,s){for(;;){let o=e,u=t,l=r,a=n,c=i,f=s,x=p(c,l);if(o instanceof w)return a instanceof se?p(H(x),f):p(x,f);{let v=o.head,y=o.tail,b=u(c,v);if(a instanceof se)if(b instanceof te)e=y,t=u,r=x,n=a,i=v,s=f;else if(b instanceof re)e=y,t=u,r=x,n=a,i=v,s=f;else{let $;a instanceof se?$=p(H(x),f):$=p(x,f);let j=$;if(y instanceof w)return p(d([v]),j);{let g=y.head,S=y.tail,T,m=u(v,g);m instanceof te?T=new se:m instanceof re?T=new se:T=new wt;let z=T;e=S,t=u,r=d([v]),n=z,i=g,s=j}}else if(b instanceof te){let $;a instanceof se?$=p(H(x),f):$=p(x,f);let j=$;if(y instanceof w)return p(d([v]),j);{let g=y.head,S=y.tail,T,m=u(v,g);m instanceof te?T=new se:m instanceof re?T=new se:T=new wt;let z=T;e=S,t=u,r=d([v]),n=z,i=g,s=j}}else if(b instanceof re){let $;a instanceof se?$=p(H(x),f):$=p(x,f);let j=$;if(y instanceof w)return p(d([v]),j);{let g=y.head,S=y.tail,T,m=u(v,g);m instanceof te?T=new se:m instanceof re?T=new se:T=new wt;let z=T;e=S,t=u,r=d([v]),n=z,i=g,s=j}}else e=y,t=u,r=x,n=a,i=v,s=f}}}function Gl(e,t,r,n){for(;;){let i=e,s=t,o=r,u=n;if(i instanceof w)return qt(s,u);if(s instanceof w)return qt(i,u);{let l=i.head,a=i.tail,c=s.head,f=s.tail,x=o(l,c);x instanceof te?(e=a,t=s,r=o,n=p(l,u)):x instanceof re?(e=i,t=f,r=o,n=p(c,u)):(e=i,t=f,r=o,n=p(c,u))}}}function Hl(e,t,r){for(;;){let n=e,i=t,s=r;if(n instanceof w)return H(s);{let o=n.tail;if(o instanceof w){let u=n.head;return H(p(H(u),s))}else{let u=n.head,l=o.head,a=o.tail,c=Gl(u,l,i,d([]));e=a,t=i,r=p(c,s)}}}}function Vl(e,t,r,n){for(;;){let i=e,s=t,o=r,u=n;if(i instanceof w)return qt(s,u);if(s instanceof w)return qt(i,u);{let l=i.head,a=i.tail,c=s.head,f=s.tail,x=o(l,c);x instanceof te?(e=i,t=f,r=o,n=p(c,u)):x instanceof re?(e=a,t=s,r=o,n=p(l,u)):(e=a,t=s,r=o,n=p(l,u))}}}function Yl(e,t,r){for(;;){let n=e,i=t,s=r;if(n instanceof w)return H(s);{let o=n.tail;if(o instanceof w){let u=n.head;return H(p(H(u),s))}else{let u=n.head,l=o.head,a=o.tail,c=Vl(u,l,i,d([]));e=a,t=i,r=p(c,s)}}}}function Jl(e,t,r){for(;;){let n=e,i=t,s=r;if(n instanceof w)return d([]);if(i instanceof se){if(n.tail instanceof w)return n.head;e=Hl(n,s,d([])),t=new wt,r=s}else if(n.tail instanceof w){let u=n.head;return H(u)}else e=Yl(n,s,d([])),t=new se,r=s}}function Hn(e,t){if(e instanceof w)return d([]);{let r=e.tail;if(r instanceof w){let n=e.head;return d([n])}else{let n=e.head,i=r.head,s=r.tail,o,u=t(n,i);u instanceof te?o=new se:u instanceof re?o=new se:o=new wt;let l=o,a=Rl(s,t,d([n]),l,i,d([]));return Jl(a,new se,t)}}}function Vn(e,t){return Wl(e,r=>{let n=r[0],i=r[1];return G(n,t)?new h(i):new k(void 0)})}function Xl(e,t,r,n){for(;;){let i=e,s=t,o=r,u=n;if(i instanceof w)return H(p([s,o],u));{let l=i.head[0];if(G(l,s)){let a=i.tail;return qt(u,p([l,o],a))}else{let a=i.head;e=i.tail,t=s,r=o,n=p(a,u)}}}}function Yn(e,t,r){return Xl(e,t,r,d([]))}function ra(e,t){for(;;){let r=e,n=t;if(r instanceof w)return n;{let i=r.head;e=r.tail,t=n+i}}}function Nt(e){return ra(e,"")}function Lr(e){let r=qs(e);return Jn(r)}var it=class extends _{constructor(t,r,n){super(),this.expected=t,this.found=r,this.path=n}},Ve=class extends _{constructor(t){super(),this.function=t}};function st(e,t){let r=t.function(e),n=r[0],i=r[1];return i instanceof w?new h(n):new k(i)}function bt(e){return new Ve(t=>[e,d([])])}function yt(e,t){return new Ve(r=>{let n=e.function(r),i=n[0],s=n[1];return[t(i),s]})}function fa(e,t,r){for(;;){let n=e,i=t,s=r;if(s instanceof w)return i;{let o=s.head,u=s.tail,l=o.function(n),a=l;if(l[1]instanceof w)return a;e=n,t=i,r=u}}}function Xn(e,t){return new Ve(r=>{let n=e.function(r),i=n;return n[1]instanceof w?i:fa(r,i,t)})}function Ds(e,t,r){let n=r(e);return n instanceof h?[n[0],d([])]:[n[0],d([new it(t,xt(e),d([]))])]}function ca(e){return Ds(e,"Int",Ws)}var Us=new Ve(ca);function pa(e){return Ds(e,"String",Rs)}var Ye=new Ve(pa);function ar(e){return new Ve(t=>Fs(t,e.function,(r,n)=>Mr(r,d([n])),0,d([])))}function Mr(e,t){let r=Xn(Ye,d([yt(Us,xe)])),n=Se(t,s=>{let o=s,u=st(o,r);return u instanceof h?u[0]:"<"+xt(o)+">"}),i=Se(e[1],s=>{let o=s;return new it(o.expected,o.found,Le(n,s.path))});return[e[0],i]}function da(e,t,r,n,i){for(;;){let s=e,o=t,u=r,l=n,a=i;if(s instanceof w){let c=u(l);return Mr(c,H(o))}else{let c=s.head,f=s.tail,x=Ps(l,c);if(x instanceof h){let v=x[0];if(v instanceof E){let y=v[0];e=f,t=p(c,o),r=u,n=y,i=a}else return a(l,p(c,o))}else{let v=x[0],$=[u(l)[0],d([new it(v,xt(l),d([]))])];return Mr($,H(o))}}}}function Kn(e,t,r){return new Ve(n=>{let i=da(e,d([]),t.function,n,(c,f)=>{let y=[t.function(c)[0],d([new it("Field","Nothing",d([]))])];return Mr(y,H(f))}),s=i[0],o=i[1],u=r(s).function(n),l=u[0],a=u[1];return[l,Le(o,a)]})}function Mt(e,t,r){return Kn(d([e]),t,r)}var _a=void 0,Hs={};function xe(e){return e.toString()}function gt(e){return[e.charCodeAt(0)|0,e.slice(1)]}function we(e){return e.toLowerCase()}function oe(e,t,r){return e.slice(t,t+r)}function Lt(e,t){return e.startsWith(t)}var Ys=[" ","	",`
`,"\v","\f","\r","\x85","\u2028","\u2029"].join(""),ma=new RegExp(`^[${Ys}]*`),ha=new RegExp(`[${Ys}]*$`);function qs(e){return e.replace(ma,"")}function Jn(e){return e.replace(ha,"")}function Te(){return Re.new()}function He(e,t){let r=e.get(t,Hs);return r===Hs?new k(_a):new h(r)}function Js(e,t,r){return r.set(e,t)}function xt(e){if(typeof e=="string")return"String";if(typeof e=="boolean")return"Bool";if(e instanceof Bt)return"Result";if(e instanceof me)return"List";if(e instanceof nr)return"BitArray";if(e instanceof Re)return"Dict";if(Number.isInteger(e))return"Int";if(Array.isArray(e))return"Array";if(typeof e=="number")return"Float";if(e===null)return"Nil";if(e===void 0)return"Nil";{let t=typeof e;return t.charAt(0).toUpperCase()+t.slice(1)}}function Ps(e,t){if(e instanceof Re||e instanceof WeakMap||e instanceof Map){let n={},i=e.get(t,n);return i===n?new h(new W):new h(new E(i))}let r=Number.isInteger(t);if(r&&t>=0&&t<8&&e instanceof me){let n=0;for(let i of e){if(n===t)return new h(new E(i));n++}return new k("Indexable")}return r&&Array.isArray(e)||e&&typeof e=="object"||e&&Object.getPrototypeOf(e)===Object.prototype?t in e?new h(new E(e[t])):new h(new W):new k(r?"Indexable":"Dict")}function Fs(e,t,r,n,i){if(!(e instanceof me||Array.isArray(e))){let o=new it("List",xt(e),i);return[i,me.fromArray([o])]}let s=[];for(let o of e){let u=t(o),[l,a]=u;if(a instanceof he){let[c,f]=r(u,n.toString());return[i,f]}s.push(l),n++}return[me.fromArray(s),i]}function Ws(e){return Number.isInteger(e)?new h(e):new k(0)}function Rs(e){return typeof e=="string"?new h(e):new k("")}function Me(e,t,r){return Js(t,r,e)}function Xs(e,t,r){let n=He(e,t);if(n instanceof h){let i=n[0];return Me(e,t,r(new E(i)))}else return Me(e,t,r(new W))}function Ks(e){return e instanceof h}function ut(e,t){if(e instanceof h){let r=e[0];return new h(t(r))}else{let r=e[0];return new k(r)}}function vt(e,t){if(e instanceof h){let r=e[0];return new h(r)}else{let r=e[0];return new k(t(r))}}function lt(e,t){if(e instanceof h){let r=e[0];return t(r)}else{let r=e[0];return new k(r)}}function kt(e,t){return lt(e,t)}function fr(e,t){return e instanceof h?e[0]:t}function Ir(e){return e instanceof h,e[0]}function Dr(e,t){if(e instanceof h){let r=e[0];return new h(r)}else return new k(t)}function Qs(e){return ur(e,t=>t)}var Ur=class extends _{constructor(t,r){super(),this.values=t,this.errors=r}},Ie=class extends _{constructor(t,r){super(),this.values=t,this.errors=r}},cr=class extends _{constructor(t,r){super(),this.values=t,this.output=r}};function Zs(e){return new cr(Te(),e)}function It(){return new Ur(Te(),Te())}function eo(e,t){let r=He(e.errors,t);if(r instanceof h){let n=r[0];return new k(n)}else{let n=r[0];return new h(n)}}function xa(e,t){if(e instanceof Ie){let r=e.errors;return new Ie(t,r)}else{let r=e.output;return new cr(t,r)}}function to(e){if(e instanceof Ie){let t=e.values,r=e.errors;return new k(new Ur(t,r))}else{let t=e.output;return new h(t)}}function ro(e,t){return r=>{let n=e(r);if(n instanceof h){let i=n[0];return t(i)}else{let i=n[0];return new k(i)}}}function no(e){return new h(Lr(e))}function wa(e){return Gn(e,Te(),(t,r)=>Xs(t,r[0],n=>p(r[1],Br(n,d([])))))}function io(e,t){let n=wa(t);return(i=>xa(e,i))(n)}function so(e){return e===""?new k("Must not be blank"):new h(e)}function ba(e){return e instanceof Ie,e.values}function ya(e,t,r){let n,s=ba(e),o=He(s,t),u=fr(o,d([]));n=r(u);let l=n;if(e instanceof Ie){let a=e.values,c=e.errors;if(l instanceof h)return new Ie(a,c);{let f=l[0];return new Ie(a,Me(c,t,f))}}else{let a=e.values,c=e.output;if(l instanceof h){let f=l[0];return new cr(a,c(f))}else{let f=l[0];return new Ie(a,Me(Te(),t,f))}}}function oo(e,t,r){return ya(e,t,n=>{let s=As(n),o=fr(s,"");return r(o)})}var N=class extends _{constructor(t,r,n,i,s,o,u){super(),this.scheme=t,this.userinfo=r,this.host=n,this.port=i,this.path=s,this.query=o,this.fragment=u}};function ka(e){return 48>=e&&e<=57||65>=e&&e<=90||97>=e&&e<=122||e===58||e===46}function Ue(e,t){return new h((()=>{let r=t;return new N(r.scheme,r.userinfo,r.host,r.port,r.path,r.query,new E(e))})())}function ja(e,t,r,n){for(;;){let i=e,s=t,o=r,u=n;if(s.startsWith("#"))if(u===0){let l=s.slice(1);return Ue(l,o)}else{let l=s.slice(1),a=oe(i,0,u),c,f=o;return c=new N(f.scheme,f.userinfo,f.host,f.port,f.path,new E(a),f.fragment),Ue(l,c)}else{if(s==="")return new h((()=>{let l=o;return new N(l.scheme,l.userinfo,l.host,l.port,l.path,new E(i),l.fragment)})());{let a=gt(s)[1];e=i,t=a,r=o,n=u+1}}}}function at(e,t){return ja(e,e,t,0)}function Sa(e,t,r,n){for(;;){let i=e,s=t,o=r,u=n;if(s.startsWith("?")){let l=s.slice(1),a=oe(i,0,u),c,f=o;return c=new N(f.scheme,f.userinfo,f.host,f.port,a,f.query,f.fragment),at(l,c)}else if(s.startsWith("#")){let l=s.slice(1),a=oe(i,0,u),c,f=o;return c=new N(f.scheme,f.userinfo,f.host,f.port,a,f.query,f.fragment),Ue(l,c)}else{if(s==="")return new h((()=>{let l=o;return new N(l.scheme,l.userinfo,l.host,l.port,i,l.query,l.fragment)})());{let a=gt(s)[1];e=i,t=a,r=o,n=u+1}}}}function Ut(e,t){return Sa(e,e,t,0)}function De(e,t,r){for(;;){let n=e,i=t,s=r;if(n.startsWith("0"))e=n.slice(1),t=i,r=s*10;else if(n.startsWith("1"))e=n.slice(1),t=i,r=s*10+1;else if(n.startsWith("2"))e=n.slice(1),t=i,r=s*10+2;else if(n.startsWith("3"))e=n.slice(1),t=i,r=s*10+3;else if(n.startsWith("4"))e=n.slice(1),t=i,r=s*10+4;else if(n.startsWith("5"))e=n.slice(1),t=i,r=s*10+5;else if(n.startsWith("6"))e=n.slice(1),t=i,r=s*10+6;else if(n.startsWith("7"))e=n.slice(1),t=i,r=s*10+7;else if(n.startsWith("8"))e=n.slice(1),t=i,r=s*10+8;else if(n.startsWith("9"))e=n.slice(1),t=i,r=s*10+9;else if(n.startsWith("?")){let o=n.slice(1),u,l=i;return u=new N(l.scheme,l.userinfo,l.host,new E(s),l.path,l.query,l.fragment),at(o,u)}else if(n.startsWith("#")){let o=n.slice(1),u,l=i;return u=new N(l.scheme,l.userinfo,l.host,new E(s),l.path,l.query,l.fragment),Ue(o,u)}else if(n.startsWith("/")){let o,u=i;return o=new N(u.scheme,u.userinfo,u.host,new E(s),u.path,u.query,u.fragment),Ut(n,o)}else return n===""?new h((()=>{let o=i;return new N(o.scheme,o.userinfo,o.host,new E(s),o.path,o.query,o.fragment)})()):new k(void 0)}}function Fr(e,t){if(e.startsWith(":0")){let r=e.slice(2);return De(r,t,0)}else if(e.startsWith(":1")){let r=e.slice(2);return De(r,t,1)}else if(e.startsWith(":2")){let r=e.slice(2);return De(r,t,2)}else if(e.startsWith(":3")){let r=e.slice(2);return De(r,t,3)}else if(e.startsWith(":4")){let r=e.slice(2);return De(r,t,4)}else if(e.startsWith(":5")){let r=e.slice(2);return De(r,t,5)}else if(e.startsWith(":6")){let r=e.slice(2);return De(r,t,6)}else if(e.startsWith(":7")){let r=e.slice(2);return De(r,t,7)}else if(e.startsWith(":8")){let r=e.slice(2);return De(r,t,8)}else if(e.startsWith(":9")){let r=e.slice(2);return De(r,t,9)}else{if(e.startsWith(":"))return new k(void 0);if(e.startsWith("?")){let r=e.slice(1);return at(r,t)}else if(e.startsWith("#")){let r=e.slice(1);return Ue(r,t)}else return e.startsWith("/")?Ut(e,t):e===""?new h(t):new k(void 0)}}function uo(e,t,r,n){for(;;){let i=e,s=t,o=r,u=n;if(s==="")return new h((()=>{let l=o;return new N(l.scheme,l.userinfo,new E(i),l.port,l.path,l.query,l.fragment)})());if(s.startsWith(":")){let l=oe(i,0,u),a,c=o;return a=new N(c.scheme,c.userinfo,new E(l),c.port,c.path,c.query,c.fragment),Fr(s,a)}else if(s.startsWith("/")){let l=oe(i,0,u),a,c=o;return a=new N(c.scheme,c.userinfo,new E(l),c.port,c.path,c.query,c.fragment),Ut(s,a)}else if(s.startsWith("?")){let l=s.slice(1),a=oe(i,0,u),c,f=o;return c=new N(f.scheme,f.userinfo,new E(a),f.port,f.path,f.query,f.fragment),at(l,c)}else if(s.startsWith("#")){let l=s.slice(1),a=oe(i,0,u),c,f=o;return c=new N(f.scheme,f.userinfo,new E(a),f.port,f.path,f.query,f.fragment),Ue(l,c)}else{let a=gt(s)[1];e=i,t=a,r=o,n=u+1}}}function Ea(e,t,r,n){for(;;){let i=e,s=t,o=r,u=n;if(s==="")return new h((()=>{let l=o;return new N(l.scheme,l.userinfo,new E(s),l.port,l.path,l.query,l.fragment)})());if(s.startsWith("]"))if(u===0){let l=s.slice(1);return Fr(l,o)}else{let l=s.slice(1),a=oe(i,0,u+1),c,f=o;return c=new N(f.scheme,f.userinfo,new E(a),f.port,f.path,f.query,f.fragment),Fr(l,c)}else if(s.startsWith("/")){if(u===0)return Ut(s,o);{let l=oe(i,0,u),a,c=o;return a=new N(c.scheme,c.userinfo,new E(l),c.port,c.path,c.query,c.fragment),Ut(s,a)}}else if(s.startsWith("?"))if(u===0){let l=s.slice(1);return at(l,o)}else{let l=s.slice(1),a=oe(i,0,u),c,f=o;return c=new N(f.scheme,f.userinfo,new E(a),f.port,f.path,f.query,f.fragment),at(l,c)}else if(s.startsWith("#"))if(u===0){let l=s.slice(1);return Ue(l,o)}else{let l=s.slice(1),a=oe(i,0,u),c,f=o;return c=new N(f.scheme,f.userinfo,new E(a),f.port,f.path,f.query,f.fragment),Ue(l,c)}else{let l=gt(s),a=l[0],c=l[1];if(ka(a))e=i,t=c,r=o,n=u+1;else return uo(i,i,o,0)}}}function za(e,t){return Ea(e,e,t,0)}function Aa(e,t){return uo(e,e,t,0)}function Dt(e,t){if(e.startsWith("["))return za(e,t);if(e.startsWith(":")){let r,n=t;return r=new N(n.scheme,n.userinfo,new E(""),n.port,n.path,n.query,n.fragment),Fr(e,r)}else return e===""?new h((()=>{let r=t;return new N(r.scheme,r.userinfo,new E(""),r.port,r.path,r.query,r.fragment)})()):Aa(e,t)}function Ta(e,t,r,n){for(;;){let i=e,s=t,o=r,u=n;if(s.startsWith("@"))if(u===0){let l=s.slice(1);return Dt(l,o)}else{let l=s.slice(1),a=oe(i,0,u),c,f=o;return c=new N(f.scheme,new E(a),f.host,f.port,f.path,f.query,f.fragment),Dt(l,c)}else{if(s==="")return Dt(i,o);if(s.startsWith("/"))return Dt(i,o);if(s.startsWith("?"))return Dt(i,o);if(s.startsWith("#"))return Dt(i,o);{let a=gt(s)[1];e=i,t=a,r=o,n=u+1}}}}function Ca(e,t){return Ta(e,e,t,0)}function Zn(e,t){if(e==="//")return new h((()=>{let r=t;return new N(r.scheme,r.userinfo,new E(""),r.port,r.path,r.query,r.fragment)})());if(e.startsWith("//")){let r=e.slice(2);return Ca(r,t)}else return Ut(e,t)}function Ba(e,t,r,n){for(;;){let i=e,s=t,o=r,u=n;if(s.startsWith("/")){if(u===0)return Zn(s,o);{let l=oe(i,0,u),a,c=o;return a=new N(new E(we(l)),c.userinfo,c.host,c.port,c.path,c.query,c.fragment),Zn(s,a)}}else if(s.startsWith("?"))if(u===0){let l=s.slice(1);return at(l,o)}else{let l=s.slice(1),a=oe(i,0,u),c,f=o;return c=new N(new E(we(a)),f.userinfo,f.host,f.port,f.path,f.query,f.fragment),at(l,c)}else if(s.startsWith("#"))if(u===0){let l=s.slice(1);return Ue(l,o)}else{let l=s.slice(1),a=oe(i,0,u),c,f=o;return c=new N(new E(we(a)),f.userinfo,f.host,f.port,f.path,f.query,f.fragment),Ue(l,c)}else if(s.startsWith(":")){if(u===0)return new k(void 0);{let l=s.slice(1),a=oe(i,0,u),c,f=o;return c=new N(new E(we(a)),f.userinfo,f.host,f.port,f.path,f.query,f.fragment),Zn(l,c)}}else{if(s==="")return new h((()=>{let l=o;return new N(l.scheme,l.userinfo,l.host,l.port,i,l.query,l.fragment)})());{let a=gt(s)[1];e=i,t=a,r=o,n=u+1}}}}function lo(e){let t,r=e.fragment;if(r instanceof E){let m=r[0];t=d(["#",m])}else t=d([]);let n=t,i,s=e.query;if(s instanceof E){let m=s[0];i=p("?",p(m,n))}else i=n;let o=i,u=p(e.path,o),l,a=e.host;Lt(e.path,"/")?l=u:a instanceof E&&a[0]!==""?l=p("/",u):l=u;let f=l,x,v=e.host,y=e.port;if(y instanceof E)if(v instanceof E){let m=y[0];x=p(":",p(xe(m),f))}else x=f;else x=f;let b=x,$,j=e.scheme,g=e.userinfo,S=e.host;if(S instanceof E)if(g instanceof E)if(j instanceof E){let m=S[0],z=g[0],A=j[0];$=p(A,p("://",p(z,p("@",p(m,b)))))}else $=b;else if(j instanceof E){let m=S[0],z=j[0];$=p(z,p("://",p(m,b)))}else{let m=S[0];$=p("//",p(m,b))}else if(g instanceof E)if(j instanceof E){let m=j[0];$=p(m,p(":",b))}else $=b;else if(j instanceof E){let m=j[0];$=p(m,p(":",b))}else $=b;return Nt($)}var Oa=new N(new W,new W,new W,new W,"",new W,new W);function ei(e){return Ba(e,e,Oa,0)}function ti(e,t,r){return e?t:r()}var pr=class extends _{},dr=class extends _{},ri=class extends _{},ni=class extends _{},ii=class extends _{},si=class extends _{},oi=class extends _{},ui=class extends _{},li=class extends _{};var Rr=class extends _{},_r=class extends _{};function co(e){return e instanceof pr?"GET":e instanceof dr?"POST":e instanceof ri?"HEAD":e instanceof ni?"PUT":e instanceof ii?"DELETE":e instanceof si?"TRACE":e instanceof oi?"CONNECT":e instanceof ui?"OPTIONS":e instanceof li?"PATCH":e[0]}function po(e){return e instanceof Rr?"http":"https"}function _o(e){let t=we(e);return t==="http"?new h(new Rr):t==="https"?new h(new _r):new k(void 0)}var Pt=class extends _{constructor(t,r,n,i,s,o,u,l){super(),this.method=t,this.headers=r,this.body=n,this.scheme=i,this.host=s,this.port=o,this.path=u,this.query=l}};function ho(e){return new N(new E(po(e.scheme)),new W,new E(e.host),e.port,e.path,e.query,new W)}function fi(e){return kt((()=>{let t=e.scheme,r=Br(t,"");return _o(r)})(),t=>kt((()=>{let r=e.host;return Cn(r,void 0)})(),r=>{let n=new Pt(new pr,d([]),"",t,r,e.port,e.path,e.query);return new h(n)}))}function $o(e,t,r){let n=Yn(e.headers,we(t),r),i=e;return new Pt(i.method,n,i.body,i.scheme,i.host,i.port,i.path,i.query)}function xo(e,t){let r=e.method,n=e.headers,i=e.scheme,s=e.host,o=e.port,u=e.path,l=e.query;return new Pt(r,n,t,i,s,o,u,l)}function wo(e,t){let r=e;return new Pt(t,r.headers,r.body,r.scheme,r.host,r.port,r.path,r.query)}var Gr=class extends _{constructor(t,r,n){super(),this.status=t,this.headers=r,this.body=n}};function bo(e,t){return Vn(e.headers,we(t))}var Ft=class e{constructor(t){this.promise=t}static wrap(t){return t instanceof Promise?new e(t):t}static unwrap(t){return t instanceof e?t.promise:t}};function Hr(e){return Promise.resolve(Ft.wrap(e))}function yo(e,t){return e.then(r=>t(Ft.unwrap(r)))}function mr(e,t){return e.then(r=>Ft.wrap(t(Ft.unwrap(r))))}function go(e,t){return mr(e,n=>(t(n),n))}function Vr(e,t){return yo(e,n=>{if(n instanceof h){let i=n[0];return t(i)}else{let i=n[0];return Hr(new k(i))}})}async function ko(e){try{return new h(await fetch(e))}catch(t){return new k(new Wt(t.toString()))}}function jo(e){return new Gr(e.status,me.fromArray([...e.headers]),e)}function Fa(e){let t=lo(ho(e)),r=co(e.method).toUpperCase(),n={headers:Wa(e.headers),method:r};return[t,n]}function So(e){let[t,r]=Fa(e);return r.method!=="GET"&&r.method!=="HEAD"&&(r.body=e.body),new globalThis.Request(t,r)}function Wa(e){let t=new globalThis.Headers;for(let[r,n]of e)t.append(r.toLowerCase(),n);return t}async function ci(e){let t;try{t=await e.body.text()}catch{return new k(new Rt)}return new h(e.withFields({body:t}))}var Wt=class extends _{constructor(t){super(),this[0]=t}},Rt=class extends _{};function Eo(e){let r=So(e),n=ko(r);return Vr(n,i=>Hr(new h(jo(i))))}function pi(e){return JSON.stringify(e)}function zo(e){return Object.fromEntries(e)}function Ao(e){try{let t=JSON.parse(e);return new h(t)}catch(t){return new k(Ga(t,e))}}function Ga(e,t){return Ha(e)?new Jr:Va(e,t)}function Ha(e){return/((unexpected (end|eof))|(end of data)|(unterminated string)|(json( parse error|\.parse)\: expected '(\:|\}|\])'))/i.test(e.message)}function Va(e,t){let r=[Ya,Ja,Ka,Xa];for(let n of r){let i=n(e,t);if(i)return i}return new ft("",0)}function Ya(e){let r=/unexpected token '(.)', ".+" is not valid JSON/i.exec(e.message);if(!r)return null;let n=Yr(r[1]);return new ft(n,-1)}function Ja(e){let r=/unexpected token (.) in JSON at position (\d+)/i.exec(e.message);if(!r)return null;let n=Yr(r[1]),i=Number(r[2]);return new ft(n,i)}function Xa(e,t){let n=/(unexpected character|expected .*) at line (\d+) column (\d+)/i.exec(e.message);if(!n)return null;let i=Number(n[2]),s=Number(n[3]),o=Qa(i,s,t),u=Yr(t[o]);return new ft(u,o)}function Ka(e){let r=/unexpected (identifier|token) "(.)"/i.exec(e.message);if(!r)return null;let n=Yr(r[2]);return new ft(n,0)}function Yr(e){return"0x"+e.charCodeAt(0).toString(16).toUpperCase()}function Qa(e,t,r){if(e===1)return t-1;let n=1,i=0;return r.split("").find((s,o)=>(s===`
`&&(n+=1),n===e?(i=o+t,!0):!1)),i}var Jr=class extends _{},ft=class extends _{constructor(t){super(),this[0]=t}};var di=class extends _{constructor(t){super(),this[0]=t}};function Za(e,t){return lt(Ao(e),r=>{let n=st(r,t);return vt(n,i=>new di(i))})}function mi(e,t){return Za(e,t)}function hi(e){return pi(e)}function ct(e){return e}function Gt(e){return zo(e)}function ce(e){return e}function To(e,t){return[e,t]}var Kr=class extends _{constructor(t){super(),this.dict=t}};function Oo(){return new Kr(Te())}function $i(e,t){let r=e.dict,n=He(r,t);return Ks(n)}var tf=void 0;function qo(e,t){return new Kr(Me(e.dict,t,tf))}var nf=Re.new(),sf=Oo(),Qr=()=>nf,hr=()=>sf,Be=()=>globalThis?.document,Zr="http://www.w3.org/1999/xhtml",en=1,tn=3,rn=11,No=!!globalThis.HTMLElement?.prototype?.moveBefore;var O=d([]),nn=new W;var of=new Ge,uf=new te,lf=new re;function on(e,t){return e.name===t.name?lf:e.name<t.name?uf:of}var Ee=class extends _{constructor(t,r,n){super(),this.kind=t,this.name=r,this.value=n}},$r=class extends _{constructor(t,r,n){super(),this.kind=t,this.name=r,this.value=n}},ue=class extends _{constructor(t,r,n,i,s,o,u,l,a){super(),this.kind=t,this.name=r,this.handler=n,this.include=i,this.prevent_default=s,this.stop_propagation=o,this.immediate=u,this.debounce=l,this.throttle=a}},Ht=class extends _{constructor(t,r,n){super(),this.prevent_default=t,this.stop_propagation=r,this.message=n}},wi=class extends _{constructor(t){super(),this.kind=t}};var bi=class extends _{constructor(t){super(),this.kind=t}};function pf(e,t){for(;;){let r=e,n=t;if(r instanceof w)return n;{let i=r.head;if(i instanceof Ee){let s=i.name;if(s==="")e=r.tail,t=n;else if(s==="class"){let o=i.value;if(o==="")e=r.tail,t=n;else{let u=r.tail;if(u instanceof w){let l=i;e=u,t=p(l,n)}else{let l=u.head;if(l instanceof Ee)if(l.name==="class"){let c=i.kind,f=o,x=u.tail,v=l.value,y=f+" "+v,b=new Ee(c,"class",y);e=p(b,x),t=n}else{let c=i;e=u,t=p(c,n)}else{let a=i;e=u,t=p(a,n)}}}}else if(s==="style"){let o=i.value;if(o==="")e=r.tail,t=n;else{let u=r.tail;if(u instanceof w){let l=i;e=u,t=p(l,n)}else{let l=u.head;if(l instanceof Ee)if(l.name==="style"){let c=i.kind,f=o,x=u.tail,v=l.value,y=f+";"+v,b=new Ee(c,"style",y);e=p(b,x),t=n}else{let c=i;e=u,t=p(c,n)}else{let a=i;e=u,t=p(a,n)}}}}else{let o=i;e=r.tail,t=p(o,n)}}else{let s=i;e=r.tail,t=p(s,n)}}}}function Fo(e){if(e instanceof w)return e;if(e.tail instanceof w)return e;{let n=Hn(e,(i,s)=>on(s,i));return pf(n,O)}}var yi=0;function Wo(e,t){return new Ee(yi,e,t)}var Ro=1;var gi=2;function Go(e,t,r,n,i,s,o,u){return new ue(gi,e,t,r,n,i,s,o,u)}var vi=0;var ki=new wi(vi);var un=2,Ho=new bi(un);function pt(e,t){return Wo(e,t)}function Vo(e){return pt("id",e)}function Yo(e){return pt("for",e)}function Jo(e){return pt("name",e)}function Xo(e){return pt("type",e)}function ye(){return null}function Vt(e,t){let r=e?.get(t);return r!=null?new h(r):new k(void 0)}function Yt(e,t,r){return e??=new Map,e.set(t,r),e}function Si(e,t){return e?.delete(t),e}var an=class extends _{},fn=class extends _{constructor(t,r){super(),this.key=t,this.parent=r}},Ei=class extends _{constructor(t,r){super(),this.index=t,this.parent=r}};function mf(e,t){for(;;){let r=e,n=t;if(n instanceof w)return!1;{let i=n.head,s=n.tail;if(Lt(r,i))return!0;e=r,t=s}}}function Ke(e,t,r){return r===""?new Ei(t,e):new fn(r,e)}var wr=new an,cn="	";function Ko(e,t){for(;;){let r=e,n=t;if(r instanceof an){if(n instanceof w)return"";{let i=n.tail;return Nt(i)}}else if(r instanceof fn){let i=r.key;e=r.parent,t=p(cn,p(i,n))}else{let i=r.index;e=r.parent,t=p(cn,p(xe(i),n))}}}function Qo(e){return Ko(e,d([]))}function Zo(e,t){return t instanceof w?!1:mf(Qo(e),t)}var zi=`
`;function Ai(e,t){return Ko(e,d([zi,t]))}var ae=class extends _{constructor(t,r,n,i,s,o){super(),this.kind=t,this.key=r,this.mapper=n,this.children=i,this.keyed_children=s,this.children_count=o}},ge=class extends _{constructor(t,r,n,i,s,o,u,l,a,c){super(),this.kind=t,this.key=r,this.mapper=n,this.namespace=i,this.tag=s,this.attributes=o,this.children=u,this.keyed_children=l,this.self_closing=a,this.void=c}},ve=class extends _{constructor(t,r,n,i){super(),this.kind=t,this.key=r,this.mapper=n,this.content=i}},jt=class extends _{constructor(t,r,n,i,s,o,u){super(),this.kind=t,this.key=r,this.mapper=n,this.namespace=i,this.tag=s,this.attributes=o,this.inner_html=u}};function xf(e,t){return t===""?e==="area"||e==="base"||e==="br"||e==="col"||e==="embed"||e==="hr"||e==="img"||e==="input"||e==="link"||e==="meta"||e==="param"||e==="source"||e==="track"?!0:e==="wbr":!1}function R(e){return e instanceof ae?1+e.children_count:1}var Ti=0;function eu(e,t,r,n,i){return new ae(Ti,e,t,r,n,i)}var Ci=1;function Bi(e,t,r,n,i,s,o,u,l){return new ge(Ci,e,t,r,n,Fo(i),s,o,u,l||xf(n,r))}var Oi=2;function qi(e,t,r){return new ve(Oi,e,t,r)}var tu=3;function ru(e,t,r,n,i){for(;;){let s=e,o=t,u=r,l=n,a=i;if(o instanceof w)return[H(l),a];{let c=o.head;if(c instanceof ae){let f=c;if(f.key===""){let x=o.tail,v=s+"::"+xe(u),y=ru(v,f.children,0,O,ye()),b=y[0],$=y[1],j,g=f;j=new ae(g.kind,g.key,g.mapper,b,$,g.children_count);let T=p(j,l),m=u+1;e=s,t=x,r=m,n=T,i=a}else{let x=c;if(x.key!==""){let v=o.tail,y=s+"::"+x.key,b=dn(y,x),$=p(b,l),j=Yt(a,y,b),g=u+1;e=s,t=v,r=g,n=$,i=j}else{let v=c,y=o.tail,b=p(v,l),$=u+1;e=s,t=y,r=$,n=b,i=a}}}else{let f=c;if(f.key!==""){let x=o.tail,v=s+"::"+f.key,y=dn(v,f),b=p(y,l),$=Yt(a,v,y),j=u+1;e=s,t=x,r=j,n=b,i=$}else{let x=c,v=o.tail,y=p(x,l),b=u+1;e=s,t=v,r=b,n=y,i=a}}}}}function dn(e,t){if(t instanceof ae){let r=t.children,n=ru(e,r,0,O,ye()),i=n[0],s=n[1],o=t;return new ae(o.kind,e,o.mapper,i,s,o.children_count)}else if(t instanceof ge){let r=t;return new ge(r.kind,e,r.mapper,r.namespace,r.tag,r.attributes,r.children,r.keyed_children,r.self_closing,r.void)}else if(t instanceof ve){let r=t;return new ve(r.kind,e,r.mapper,r.content)}else{let r=t;return new jt(r.kind,e,r.mapper,r.namespace,r.tag,r.attributes,r.inner_html)}}var Ni=(e,t)=>e===t,St=(e,t)=>{if(e===t)return!0;if(e==null||t==null)return!1;let r=typeof e;return r!==typeof t||r!=="object"||e.constructor!==t.constructor?!1:Array.isArray(e)?wf(e,t):bf(e,t)},wf=(e,t)=>{let r=e.length;if(r!==t.length)return!1;for(;r--;)if(!St(e[r],t[r]))return!1;return!0},bf=(e,t)=>{let r=Object.keys(e),n=r.length;if(Object.keys(t).length!==n)return!1;for(;n--;){let i=r[n];if(!Object.hasOwn(t,i)||!St(e[i],t[i]))return!1}return!0};var Pe=class extends _{constructor(t,r,n){super(),this.handlers=t,this.dispatched_paths=r,this.next_dispatched_paths=n}};function Mi(){return new Pe(ye(),O,O)}function ou(e){return new Pe(e.handlers,e.next_dispatched_paths,O)}function uu(e,t,r){return Si(e,Ai(t,r))}function yr(e,t,r){let n=uu(e.handlers,t,r),i=e;return new Pe(n,i.dispatched_paths,i.next_dispatched_paths)}function nu(e,t,r){return Ae(r,e,(n,i)=>{if(i instanceof ue){let s=i.name;return uu(n,t,s)}else return n})}function gr(e,t,r,n){let i=p(t,e.next_dispatched_paths),s,o=e;s=new Pe(o.handlers,o.dispatched_paths,i);let u=s,l=Vt(u.handlers,t+zi+r);if(l instanceof h){let a=l[0];return[u,st(n,a)]}else return[u,new k(d([]))]}function _n(e,t){return Zo(t,e.dispatched_paths)}function lu(e,t,r,n,i){return Yt(e,Ai(r,n),yt(i,s=>{let o=s;return new Ht(o.prevent_default,o.stop_propagation,t(s.message))}))}function vr(e,t,r,n,i){let s=lu(e.handlers,t,r,n,i),o=e;return new Pe(s,o.dispatched_paths,o.next_dispatched_paths)}function iu(e,t,r,n){return Ae(n,e,(i,s)=>{if(s instanceof ue){let o=s.name,u=s.handler;return lu(i,t,r,o,u)}else return i})}function dt(e,t){let r=Ni(e,ce);return Ni(t,ce)?e:r?t:i=>e(t(i))}function su(e,t,r,n){for(;;){let i=e,s=t,o=r,u=n;if(u instanceof w)return i;{let l=u.head,a=u.tail;e=au(i,s,o,l),t=s,r=o+R(l),n=a}}}function au(e,t,r,n){if(n instanceof ae){let i=n.children;return su(e,t,r+1,i)}else if(n instanceof ge){let i=n.attributes,s=n.children,o=Ke(t,r,n.key),l=nu(e,o,i);return su(l,o,0,s)}else{if(n instanceof ve)return e;{let i=n.attributes,s=Ke(t,r,n.key);return nu(e,s,i)}}}function Qe(e,t,r,n){let i=au(e.handlers,t,r,n),s=e;return new Pe(i,s.dispatched_paths,s.next_dispatched_paths)}function Li(e,t,r,n,i){for(;;){let s=e,o=t,u=r,l=n,a=i;if(a instanceof w)return s;{let c=a.head,f=a.tail;e=fu(s,o,u,l,c),t=o,r=u,n=l+R(c),i=f}}}function fu(e,t,r,n,i){if(i instanceof ae){let s=i.children,o=dt(t,i.mapper),u=n+1;return Li(e,o,r,u,s)}else if(i instanceof ge){let s=i.attributes,o=i.children,u=Ke(r,n,i.key),l=dt(t,i.mapper),c=iu(e,l,u,s);return Li(c,l,u,0,o)}else{if(i instanceof ve)return e;{let s=i.attributes,o=Ke(r,n,i.key),u=dt(t,i.mapper);return iu(e,u,o,s)}}}function _t(e,t,r,n,i){let s=fu(e.handlers,t,r,n,i),o=e;return new Pe(s,o.dispatched_paths,o.next_dispatched_paths)}function cu(e,t,r,n,i){let s=Li(e.handlers,t,r,n,i),o=e;return new Pe(s,o.dispatched_paths,o.next_dispatched_paths)}function pe(e,t,r){return Bi("",ce,"",e,t,r,ye(),!1,!1)}function Ii(e,t,r,n){return Bi("",ce,e,t,r,n,ye(),!1,!1)}function mn(e){return qi("",ce,e)}function hn(){return qi("",ce,"")}function yf(e,t){for(;;){let r=e,n=t;if(r instanceof w)return n;{let i=r.head;e=r.tail,t=n+R(i)}}}function Di(e){return eu("",ce,e,ye(),yf(e,0))}var $n=class extends _{constructor(t,r,n){super(),this.synchronous=t,this.before_paint=r,this.after_paint=n}};var du=new $n(d([]),d([]),d([]));function mt(){return du}function Ui(e){let t=n=>{let i=n.dispatch;return e(i)},r=du;return new $n(d([t]),r.before_paint,r.after_paint)}var Pi=e=>{if(!globalThis.location)return new k(void 0);let t=new URL(e,globalThis.location.href),r=Ef(t);return new h(r)},Ef=e=>{let t=r=>r?new E(r):new W;return new N(t(e.protocol?.slice(0,-1)),new W,t(e.hostname),t(e.port&&Number(e.port)),e.pathname,t(e.search?.slice(1)),t(e.hash?.slice(1)))};var xn=class extends _{},kr=class extends _{constructor(t){super(),this[0]=t}},Fi=class extends _{constructor(t){super(),this[0]=t}},Wi=class extends _{constructor(t){super(),this[0]=t}},Ri=class extends _{},jr=class extends _{constructor(t){super(),this[0]=t}},Gi=class extends _{constructor(t){super(),this.run=t}};function zf(e){return new Gi(t=>e(lt(t,r=>{let n=r.status,i=n;if(i>=200&&i<300)return new h(r);{let s=n;return s>=400&&s<600?new k(new Fi(r)):new k(new jr(r))}})))}function Af(e){return zf(t=>e(lt(t,r=>{let n=bo(r,"content-type");if(n instanceof h){let i=n[0];return i==="application/json"?new h(r):i.startsWith("application/json;")?new h(r):new k(new jr(r))}else return new k(new jr(r))})))}function Tf(e,t){return Ui(r=>{let n=Eo(e),i=Vr(n,ci),s=mr(i,u=>vt(u,l=>l instanceof Wt?new Ri:l instanceof Rt?new xn:new xn)),o=mr(s,t.run);go(o,r)})}function _u(e,t){return Tf(e,t)}function wn(e,t){return Ui(r=>{let n=new k(e),i=t.run(n);return r(i)})}function Cf(e,t){let r=e.body,n=mi(r,t);return vt(n,i=>new Wi(i))}function Hi(e,t){return Af(r=>{let i=kt(r,s=>Cf(s,e));return t(i)})}function mu(e){let t;return e.startsWith("./")?t=Pi(e):e.startsWith("/")?t=Pi(e):t=ei(e),Dr(t,new kr(e))}function hu(e,t){let r=mu(e);if(r instanceof h){let n=r[0],i=fi(n),s=ut(i,u=>_u(u,t)),o=vt(s,u=>wn(new kr(e),t));return Ir(o)}else{let n=r[0];return wn(n,t)}}function $u(e,t,r){let n=mu(e);if(n instanceof h){let i=n[0],s=fi(i),o=ut(s,l=>{let c=wo(l,new dr),f=$o(c,"content-type","application/json"),x=xo(f,hi(t));return _u(x,r)}),u=vt(o,l=>wn(new kr(e),r));return Ir(u)}else{let i=n[0];return wn(i,r)}}var Xt=class extends _{constructor(t){super(),this.name=t}};function xu(e){let t=e.name;return Gt(d([["name",ct(t)]]))}function Of(){return Mt("name",Ye,e=>bt(new Xt(e)))}function wu(){return ar(Of())}var de=class extends _{constructor(t){super(),this[0]=t}},Sr=class extends _{constructor(t,r){super(),this.current_user=t,this.users=r}},Kt=class extends _{constructor(t){super(),this[0]=t}},Qt=class extends _{constructor(t){super(),this[0]=t}},bn=class extends _{constructor(t){super(),this[0]=t}};function Fe(e){return mn(e)}function yu(e,t){return pe("h1",e,t)}function gu(e,t){return pe("h2",e,t)}function Er(e,t){return pe("div",e,t)}function Vi(e,t){return pe("li",e,t)}function vu(e,t){return pe("p",e,t)}function ku(e,t){return pe("ul",e,t)}function ju(e,t){return pe("strong",e,t)}function Su(e,t){return pe("button",e,t)}function Eu(e,t){return pe("form",e,t)}function zu(e){return pe("input",e,O)}function Au(e,t){return pe("label",e,t)}function qf(e){return e==="input"||e==="change"||e==="focus"||e==="focusin"||e==="focusout"||e==="blur"?!0:e==="select"}function Nf(e,t){return Go(e,yt(t,r=>new Ht(!1,!1,r)),O,ki,ki,qf(e),0,0)}function Lf(e){if(e instanceof ue){let t=e;return new ue(t.kind,t.name,t.handler,t.include,Ho,t.stop_propagation,t.immediate,t.debounce,t.throttle)}else return e}function Mf(){let t=Mt(0,Ye,n=>Mt(1,Xn(yt(Ye,i=>new h(i)),d([bt(new k(void 0))])),i=>{let o=ut(i,u=>To(n,u));return bt(o)})),r=ar(t);return yt(r,Qs)}function Cu(e){let t=Nf("submit",Kn(d(["detail","formData"]),Mf(),r=>{let i=e(r);return bt(i)}));return Lf(t)}function Df(e,t){let r=Se(t,o=>Vi(d([]),d([Fe(o.name)]))),n=p(Vi(d([]),d([ju(d([]),d([Fe(e.name)])),Fe(" (you)")])),r),i=ku(d([]),n),s=gu(d([]),d([Fe("Welcome "+e.name)]));return Er(d([]),d([s,i]))}function Uf(e,t,r,n){let i=eo(e,r);return Er(d([]),d([Au(d([Yo(r)]),d([Fe(n),Fe(": ")])),zu(d([Xo(t),Vo(r),Jo(r)])),(()=>{if(i instanceof h)return hn();{let s=i[0];return vu(d([]),d([Fe(s)]))}})()]))}function Pf(e){return Eu(d([Cu(t=>new bn(t))]),d([yu(d([]),d([Fe("Register")])),Uf(e,"text","username","Username"),Er(d([]),d([Su(d([]),d([Fe("Login")]))]))]))}function Bu(e){let t;if(e instanceof de){let n=e[0];t=Pf(n)}else{let n=e.current_user,i=e.users;t=Df(n,i)}let r=t;return Er(d([]),d([r]))}var Zt=class extends _{constructor(t,r,n,i){super(),this.index=t,this.removed=r,this.changes=n,this.children=i}},Yi=class extends _{constructor(t,r){super(),this.kind=t,this.content=r}},Ji=class extends _{constructor(t,r){super(),this.kind=t,this.inner_html=r}},Xi=class extends _{constructor(t,r,n){super(),this.kind=t,this.added=r,this.removed=n}},Ki=class extends _{constructor(t,r,n,i){super(),this.kind=t,this.key=r,this.before=n,this.count=i}},Qi=class extends _{constructor(t,r,n){super(),this.kind=t,this.key=r,this.count=n}},Zi=class extends _{constructor(t,r,n,i){super(),this.kind=t,this.from=r,this.count=n,this.with=i}},es=class extends _{constructor(t,r,n){super(),this.kind=t,this.children=r,this.before=n}},ts=class extends _{constructor(t,r,n){super(),this.kind=t,this.from=r,this.count=n}};function rs(e,t,r,n){return new Zt(e,t,r,n)}var ns=0;function Ou(e){return new Yi(ns,e)}var is=1;function qu(e){return new Ji(is,e)}var ss=2;function zr(e,t){return new Xi(ss,e,t)}var gn=3;function Nu(e,t,r){return new Ki(gn,e,t,r)}var os=4;function Lu(e,t){return new Qi(os,e,t)}var vn=5;function zt(e,t,r){return new Zi(vn,e,t,r)}var kn=6;function us(e,t){return new es(kn,e,t)}var jn=7;function Mu(e,t){return new ts(jn,e,t)}var Sn=class extends _{constructor(t,r){super(),this.patch=t,this.events=r}},ls=class extends _{constructor(t,r,n){super(),this.added=t,this.removed=r,this.events=n}};function Gf(e,t,r,n){return r==="input"?t===""?_n(e,n):!1:r==="select"?t===""?_n(e,n):!1:r==="textarea"&&t===""?_n(e,n):!1}function Du(e,t,r,n,i,s,o,u){for(;;){let l=e,a=t,c=r,f=n,x=i,v=s,y=o,b=u;if(v instanceof w){if(x instanceof w)return new ls(y,b,f);{let $=x.head;if($ instanceof ue){let j=$,g=x.tail,S=$.name,T=p(j,b),m=yr(f,a,S);e=l,t=a,r=c,n=m,i=g,s=v,o=y,u=T}else{let j=$,g=x.tail,S=p(j,b);e=l,t=a,r=c,n=f,i=g,s=v,o=y,u=S}}}else if(x instanceof w){let $=v.head;if($ instanceof ue){let j=$,g=v.tail,S=$.name,T=$.handler,m=p(j,y),z=vr(f,c,a,S,T);e=l,t=a,r=c,n=z,i=x,s=g,o=m,u=b}else{let j=$,g=v.tail,S=p(j,y);e=l,t=a,r=c,n=f,i=x,s=g,o=S,u=b}}else{let $=v.head,j=v.tail,g=x.head,S=x.tail,T=on(g,$);if(T instanceof te)if(g instanceof ue){let m=g.name,z=p(g,b),A=yr(f,a,m);e=l,t=a,r=c,n=A,i=S,s=v,o=y,u=z}else{let m=p(g,b);e=l,t=a,r=c,n=f,i=S,s=v,o=y,u=m}else if(T instanceof re)if($ instanceof Ee)if(g instanceof Ee){let m,z=$.name;z==="value"||z==="checked"||z==="selected"?m=l||g.value!==$.value:m=g.value!==$.value;let A=m,B;A?B=p($,y):B=y;let I=B;e=l,t=a,r=c,n=f,i=S,s=j,o=I,u=b}else if(g instanceof ue){let m=g.name,z=p($,y),A=p(g,b),B=yr(f,a,m);e=l,t=a,r=c,n=B,i=S,s=j,o=z,u=A}else{let m=p($,y),z=p(g,b);e=l,t=a,r=c,n=f,i=S,s=j,o=m,u=z}else if($ instanceof $r)if(g instanceof $r){let m,z=$.name;z==="scrollLeft"||z==="scrollRight"?m=!0:z==="value"?m=l||!St(g.value,$.value):z==="checked"?m=l||!St(g.value,$.value):z==="selected"?m=l||!St(g.value,$.value):m=!St(g.value,$.value);let A=m,B;A?B=p($,y):B=y;let I=B;e=l,t=a,r=c,n=f,i=S,s=j,o=I,u=b}else if(g instanceof ue){let m=g.name,z=p($,y),A=p(g,b),B=yr(f,a,m);e=l,t=a,r=c,n=B,i=S,s=j,o=z,u=A}else{let m=p($,y),z=p(g,b);e=l,t=a,r=c,n=f,i=S,s=j,o=m,u=z}else if(g instanceof ue){let m=$.name,z=$.handler,A=!G(g.prevent_default,$.prevent_default)||!G(g.stop_propagation,$.stop_propagation)||g.immediate!==$.immediate||g.debounce!==$.debounce||g.throttle!==$.throttle,B;A?B=p($,y):B=y;let I=B,U=vr(f,c,a,m,z);e=l,t=a,r=c,n=U,i=S,s=j,o=I,u=b}else{let m=$.name,z=$.handler,A=p($,y),B=p(g,b),I=vr(f,c,a,m,z);e=l,t=a,r=c,n=I,i=S,s=j,o=A,u=B}else if($ instanceof ue){let m=$.name,z=$.handler,A=p($,y),B=vr(f,c,a,m,z);e=l,t=a,r=c,n=B,i=x,s=j,o=A,u=b}else{let m=p($,y);e=l,t=a,r=c,n=f,i=x,s=j,o=m,u=b}}}}function as(e,t,r,n,i,s,o,u,l,a,c,f,x,v){for(;;){let y=e,b=t,$=r,j=n,g=i,S=s,T=o,m=u,z=l,A=a,B=c,I=f,U=x,ne=v;if($ instanceof w){if(y instanceof w)return new Sn(new Zt(z,T,B,I),ne);{let ie=y.head,_e=y.tail,Z;ie.key===""||!$i(g,ie.key)?Z=T+R(ie):Z=T;let C=Z,J=Qe(ne,A,m,ie);e=_e,t=b,r=$,n=j,i=g,s=S,o=C,u=m,l=z,a=A,c=B,f=I,x=U,v=J}}else if(y instanceof w){let ie=cu(ne,U,A,m,$),_e=us($,m-S),Z=p(_e,B);return new Sn(new Zt(z,T,Z,I),ie)}else{let ie=$.head,_e=y.head;if(_e.key!==ie.key){let Z=$.tail,K=y.tail,C=Vt(b,ie.key),J=Vt(j,_e.key),D=$i(g,_e.key);if(C instanceof h)if(J instanceof h)if(D)e=K,t=b,r=$,n=j,i=g,s=S-R(_e),o=T,u=m,l=z,a=A,c=B,f=I,x=U,v=ne;else{let F=C[0],q=R(ie),L=m-S,P=Nu(ie.key,L,q),M=p(P,B),V=qo(g,ie.key),Y=S+q;e=p(F,y),t=b,r=$,n=j,i=V,s=Y,o=T,u=m,l=z,a=A,c=M,f=I,x=U,v=ne}else{let F=R(_e),q=S-F,L=Qe(ne,A,m,_e),P=Lu(_e.key,F),M=p(P,B);e=K,t=b,r=$,n=j,i=g,s=q,o=T,u=m,l=z,a=A,c=M,f=I,x=U,v=L}else if(J instanceof h){let F=m-S,q=R(ie),L=_t(ne,U,A,m,ie),P=us(d([ie]),F),M=p(P,B);e=y,t=b,r=Z,n=j,i=g,s=S+q,o=T,u=m+q,l=z,a=A,c=M,f=I,x=U,v=L}else{let F=R(_e),q=R(ie),L=zt(m-S,F,ie),P,V=Qe(ne,A,m,_e);P=_t(V,U,A,m,ie);let Y=P;e=K,t=b,r=Z,n=j,i=g,s=S-F+q,o=T,u=m+q,l=z,a=A,c=p(L,B),f=I,x=U,v=Y}}else{let Z=y.head;if(Z instanceof ae){let K=$.head;if(K instanceof ae){let C=K,J=$.tail,D=Z,F=y.tail,q=m+1,L=D.children_count,P=C.children_count,M=dt(U,C.mapper),V=as(D.children,D.keyed_children,C.children,C.keyed_children,hr(),S,0,q,-1,A,O,I,M,ne),Y;if(V.patch.removed>0){let We=q+P-S,et=Mu(We,V.patch.removed);Y=Le(V.patch.changes,p(et,B))}else Y=Le(V.patch.changes,B);let ze=Y;e=F,t=b,r=J,n=j,i=g,s=S+P-L,o=T,u=q+P,l=z,a=A,c=ze,f=V.patch.children,x=U,v=V.events}else{let C=K,J=$.tail,D=Z,F=y.tail,q=R(D),L=R(C),P=zt(m-S,q,C),M,Y=Qe(ne,A,m,D);M=_t(Y,U,A,m,C);let le=M;e=F,t=b,r=J,n=j,i=g,s=S-q+L,o=T,u=m+L,l=z,a=A,c=p(P,B),f=I,x=U,v=le}}else if(Z instanceof ge){let K=$.head;if(K instanceof ge){let C=K,J=Z;if(J.namespace===C.namespace&&J.tag===C.tag){let D=$.tail,F=y.tail,q=dt(U,C.mapper),L=Ke(A,m,C.key),P=Gf(ne,C.namespace,C.tag,L),M=Du(P,L,q,ne,J.attributes,C.attributes,O,O),V=M.added,Y=M.removed,le=M.events,ze;Y instanceof w?V instanceof w?ze=O:ze=d([zr(V,Y)]):ze=d([zr(V,Y)]);let We=ze,et=as(J.children,J.keyed_children,C.children,C.keyed_children,hr(),0,0,0,m,L,We,O,q,le),tt,ht=et.patch;ht.children instanceof w?ht.changes instanceof w?ht.removed===0?tt=I:tt=p(et.patch,I):tt=p(et.patch,I):tt=p(et.patch,I);let al=tt;e=F,t=b,r=D,n=j,i=g,s=S,o=T,u=m+1,l=z,a=A,c=B,f=al,x=U,v=et.events}else{let D=K,F=$.tail,q=Z,L=y.tail,P=R(q),M=R(D),V=zt(m-S,P,D),Y,ze=Qe(ne,A,m,q);Y=_t(ze,U,A,m,D);let We=Y;e=L,t=b,r=F,n=j,i=g,s=S-P+M,o=T,u=m+M,l=z,a=A,c=p(V,B),f=I,x=U,v=We}}else{let C=K,J=$.tail,D=Z,F=y.tail,q=R(D),L=R(C),P=zt(m-S,q,C),M,Y=Qe(ne,A,m,D);M=_t(Y,U,A,m,C);let le=M;e=F,t=b,r=J,n=j,i=g,s=S-q+L,o=T,u=m+L,l=z,a=A,c=p(P,B),f=I,x=U,v=le}}else if(Z instanceof ve){let K=$.head;if(K instanceof ve){let C=K;if(Z.content===C.content){let D=$.tail;e=y.tail,t=b,r=D,n=j,i=g,s=S,o=T,u=m+1,l=z,a=A,c=B,f=I,x=U,v=ne}else{let D=K,F=$.tail,q=y.tail,L=rs(m,0,d([Ou(D.content)]),O);e=q,t=b,r=F,n=j,i=g,s=S,o=T,u=m+1,l=z,a=A,c=B,f=p(L,I),x=U,v=ne}}else{let C=K,J=$.tail,D=Z,F=y.tail,q=R(D),L=R(C),P=zt(m-S,q,C),M,Y=Qe(ne,A,m,D);M=_t(Y,U,A,m,C);let le=M;e=F,t=b,r=J,n=j,i=g,s=S-q+L,o=T,u=m+L,l=z,a=A,c=p(P,B),f=I,x=U,v=le}}else{let K=$.head;if(K instanceof jt){let C=K,J=$.tail,D=Z,F=y.tail,q=dt(U,C.mapper),L=Ke(A,m,C.key),P=Du(!1,L,q,ne,D.attributes,C.attributes,O,O),M=P.added,V=P.removed,Y=P.events,le;V instanceof w?M instanceof w?le=O:le=d([zr(M,V)]):le=d([zr(M,V)]);let ze=le,We;D.inner_html===C.inner_html?We=ze:We=p(qu(C.inner_html),ze);let tt=We,ht;tt instanceof w?ht=I:ht=p(rs(m,0,tt,d([])),I);let hs=ht;e=F,t=b,r=J,n=j,i=g,s=S,o=T,u=m+1,l=z,a=A,c=B,f=hs,x=U,v=Y}else{let C=K,J=$.tail,D=Z,F=y.tail,q=R(D),L=R(C),P=zt(m-S,q,C),M,Y=Qe(ne,A,m,D);M=_t(Y,U,A,m,C);let le=M;e=F,t=b,r=J,n=j,i=g,s=S-q+L,o=T,u=m+L,l=z,a=A,c=p(P,B),f=I,x=U,v=le}}}}}}function fs(e,t,r){return as(d([t]),ye(),d([r]),ye(),hr(),0,0,0,0,wr,O,O,ce,ou(e))}var zn=class{offset=0;#e=null;#i=()=>{};#l=!1;#a=!1;constructor(t,r,{useServerEvents:n=!1,exposeKeys:i=!1}={}){this.#e=t,this.#i=r,this.#l=n,this.#a=i}mount(t){En(this.#e,this.#_(this.#e,0,t))}#t=[];push(t){let r=this.offset;r&&(Ze(t.changes,n=>{switch(n.kind){case kn:case gn:n.before=(n.before|0)+r;break;case jn:case vn:n.from=(n.from|0)+r;break}}),Ze(t.children,n=>{n.index=(n.index|0)+r})),this.#t.push({node:this.#e,patch:t}),this.#c()}#c(){let t=this;for(;t.#t.length;){let{node:r,patch:n}=t.#t.pop();Ze(n.changes,o=>{switch(o.kind){case kn:t.#f(r,o.children,o.before);break;case gn:t.#p(r,o.key,o.before,o.count);break;case os:t.#s(r,o.key,o.count);break;case jn:t.#r(r,o.from,o.count);break;case vn:t.#n(r,o.from,o.count,o.with);break;case ns:t.#m(r,o.content);break;case is:t.#u(r,o.inner_html);break;case ss:t.#d(r,o.added,o.removed);break}}),n.removed&&t.#r(r,r.childNodes.length-n.removed,n.removed);let i=-1,s=null;Ze(n.children,o=>{let u=o.index|0,l=s&&i-u===1?s.previousSibling:Ar(r,u);t.#t.push({node:l,patch:o}),s=l,i=u})}}#f(t,r,n){let i=Fu(),s=n|0;Ze(r,o=>{let u=this.#_(t,s,o);En(i,u),s+=R(o)}),cs(t,i,Ar(t,n))}#p(t,r,n,i){let s=Wu(t,r),o=Ar(t,n);for(let u=0;u<i&&s!==null;++u){let l=s.nextSibling;No?t.moveBefore(s,o):cs(t,s,o),s=l}}#s(t,r,n){this.#o(t,Wu(t,r),n)}#r(t,r,n){this.#o(t,Ar(t,r),n)}#o(t,r,n){for(;n-- >0&&r!==null;){let i=r.nextSibling,s=r[Q].key;s&&t[Q].keyedChildren.delete(s);for(let[o,{timeout:u}]of r[Q].debouncers??[])clearTimeout(u);t.removeChild(r),r=i}}#n(t,r,n,i){this.#r(t,r,n);let s=this.#_(t,r,i);cs(t,s,Ar(t,r))}#m(t,r){t.data=r??""}#u(t,r){t.innerHTML=r??""}#d(t,r,n){Ze(n,i=>{let s=i.name;t[Q].handlers.has(s)?(t.removeEventListener(s,ps),t[Q].handlers.delete(s),t[Q].throttles.has(s)&&t[Q].throttles.delete(s),t[Q].debouncers.has(s)&&(clearTimeout(t[Q].debouncers.get(s).timeout),t[Q].debouncers.delete(s))):(t.removeAttribute(s),Gu[s]?.removed?.(t,s))}),Ze(r,i=>{this.#$(t,i)})}#_(t,r,n){switch(n.kind){case Ci:{let i=Uu(t,r,n);return this.#h(i,n),this.#f(i,n.children),i}case Oi:return Pu(t,r,n);case Ti:{let i=Fu(),s=Pu(t,r,n);En(i,s);let o=r+1;return Ze(n.children,u=>{En(i,this.#_(t,o,u)),o+=R(u)}),i}case tu:{let i=Uu(t,r,n);return this.#h(i,n),this.#u(i,n.inner_html),i}}}#h(t,{key:r,attributes:n}){this.#a&&r&&t.setAttribute("data-lustre-key",r),Ze(n,i=>this.#$(t,i))}#$(t,r){let{debouncers:n,handlers:i,throttles:s}=t[Q],{kind:o,name:u,value:l,prevent_default:a,stop_propagation:c,immediate:f,include:x,debounce:v,throttle:y}=r;switch(o){case yi:{let b=l??"";if(u==="virtual:defaultValue"){t.defaultValue=b;return}b!==t.getAttribute(u)&&t.setAttribute(u,b),Gu[u]?.added?.(t,l);break}case Ro:t[u]=l;break;case gi:{if(i.has(u)&&t.removeEventListener(u,ps),t.addEventListener(u,ps,{passive:a.kind===vi}),y>0){let b=s.get(u)??{};b.delay=y,s.set(u,b)}else s.delete(u);if(v>0){let b=n.get(u)??{};b.delay=v,n.set(u,b)}else clearTimeout(n.get(u)?.timeout),n.delete(u);i.set(u,b=>{a.kind===un&&b.preventDefault(),c.kind===un&&b.stopPropagation();let $=b.type,j=b.currentTarget[Q].path,g=this.#l?Hf(b,x??[]):b,S=s.get($);if(S){let m=Date.now(),z=S.last||0;m>z+S.delay&&(S.last=m,S.lastEvent=b,this.#i(g,j,$,f))}let T=n.get($);T&&(clearTimeout(T.timeout),T.timeout=setTimeout(()=>{b!==s.get($)?.lastEvent&&this.#i(g,j,$,f)},T.delay)),!S&&!T&&this.#i(g,j,$,f)});break}}}},Ze=(e,t)=>{if(Array.isArray(e))for(let r=0;r<e.length;r++)t(e[r]);else if(e)for(e;e.tail;e=e.tail)t(e.head)},En=(e,t)=>e.appendChild(t),cs=(e,t,r)=>e.insertBefore(t,r??null),Uu=(e,t,{key:r,tag:n,namespace:i})=>{let s=Be().createElementNS(i||Zr,n);return At(e,s,t,r),s},Pu=(e,t,{key:r,content:n})=>{let i=Be().createTextNode(n??"");return At(e,i,t,r),i},Fu=()=>Be().createDocumentFragment(),Ar=(e,t)=>e.childNodes[t|0],Q=Symbol("lustre"),At=(e,t,r=0,n="")=>{let i=`${n||r}`;switch(t.nodeType){case en:case rn:t[Q]={key:n,path:i,keyedChildren:new Map,handlers:new Map,throttles:new Map,debouncers:new Map};break;case tn:t[Q]={key:n};break}e&&e[Q]&&n&&e[Q].keyedChildren.set(n,new WeakRef(t)),e&&e[Q]&&e[Q].path&&(t[Q].path=`${e[Q].path}${cn}${i}`)};var Wu=(e,t)=>e[Q].keyedChildren.get(t).deref(),ps=e=>{let r=e.currentTarget[Q].handlers.get(e.type);e.type==="submit"&&(e.detail??={},e.detail.formData=[...new FormData(e.target).entries()]),r(e)},Hf=(e,t=[])=>{let r={};(e.type==="input"||e.type==="change")&&t.push("target.value"),e.type==="submit"&&t.push("detail.formData");for(let n of t){let i=n.split(".");for(let s=0,o=e,u=r;s<i.length;s++){if(s===i.length-1){u[i[s]]=o[i[s]];break}u=u[i[s]]??={},o=o[i[s]]}}return r},Ru=e=>({added(t){t[e]=!0},removed(t){t[e]=!1}}),Vf=e=>({added(t,r){t[e]=r}}),Gu={checked:Ru("checked"),selected:Ru("selected"),value:Vf("value"),autofocus:{added(e){queueMicrotask(()=>e.focus?.())}},autoplay:{added(e){try{e.play?.()}catch(t){console.error(t)}}}};var Yu=e=>{let t=Ju(null,e,"");if(t===null||t.children instanceof w){let r=Hu(e);return e.appendChild(r),hn()}else{if(t.children instanceof he&&t.children.tail instanceof w)return t.children.head;{let r=Hu(e);return e.insertBefore(r,e.firstChild),Di(t.children)}}},Hu=e=>{let t=Be().createTextNode("");return At(e,t),t},Ju=(e,t,r)=>{switch(t.nodeType){case en:{let n=t.getAttribute("data-lustre-key");At(e,t,r,n),n&&t.removeAttribute("data-lustre-key");let i=t.localName,s=t.namespaceURI,o=!s||s===Zr;o&&Yf.includes(i)&&Jf(i,t);let u=Xf(t),l=Vu(t),a=o?pe(i,u,l):Ii(s,i,u,l);return n?dn(n,a):a}case tn:return At(e,t,r),t.data?mn(t.data):null;case rn:return At(e,t,r),t.childNodes.length>0?Di(Vu(t)):null;default:return null}},Yf=["input","select","textarea"],Jf=(e,t)=>{let r=t.value,n=t.checked;e==="input"&&t.type==="checkbox"&&!n||e==="input"&&t.type==="radio"&&!n||t.type!=="checkbox"&&t.type!=="radio"&&!r||queueMicrotask(()=>{t.value=r,t.checked=n,t.dispatchEvent(new Event("input",{bubbles:!0})),t.dispatchEvent(new Event("change",{bubbles:!0})),Be().activeElement!==t&&t.dispatchEvent(new Event("blur",{bubbles:!0}))})},Vu=e=>{let t=null,r=0,n=e.firstChild,i=null;for(;n;){let s=Ju(e,n,r),o=n.nextSibling;if(s){let u=new he(s,null);i?i=i.tail=u:i=t=u,r+=1}else e.removeChild(n);n=o}return i?(i.tail=O,t):O},Xf=e=>{let t=e.attributes.length,r=O;for(;t-- >0;)r=new he(Kf(e.attributes[t]),r);return r},Kf=e=>{let t=e.localName,r=e.value;return pt(t,r)};var Cr=()=>!!Be();var Tr=class{constructor(t,[r,n],i,s){this.root=t,this.#e=r,this.#i=i,this.#l=s,this.#c=new zn(this.root,(o,u,l)=>{let[a,c]=gr(this.#t,u,l,o);if(this.#t=a,c.isOk()){let f=c[0];f.stop_propagation&&o.stopPropagation(),f.prevent_default&&o.preventDefault(),this.dispatch(f.message,!1)}}),this.#a=Yu(this.root),this.#t=Mi(),this.#n=!0,this.#u(n)}root=null;set offset(t){this.#c.offset=t}dispatch(t,r=!1){if(this.#n||=r,this.#f)this.#p.push(t);else{let[n,i]=this.#l(this.#e,t);this.#e=n,this.#u(i)}}emit(t,r){(this.root.host??this.root).dispatchEvent(new CustomEvent(t,{detail:r,bubbles:!0,composed:!0}))}#e;#i;#l;#a;#t;#c;#f=!1;#p=[];#s=O;#r=O;#o=null;#n=!1;#m={dispatch:(t,r)=>this.dispatch(t,r),emit:(t,r)=>this.emit(t,r),select:()=>{},root:()=>this.root};#u(t){for(this.#f=!0;;){for(let r=t.synchronous;r.tail;r=r.tail)r.head(this.#m);if(this.#s=Ku(this.#s,t.before_paint),this.#r=Ku(this.#r,t.after_paint),!this.#p.length)break;[this.#e,t]=this.#l(this.#e,this.#p.shift())}this.#f=!1,this.#n?(cancelAnimationFrame(this.#o),this.#d()):this.#o||(this.#o=requestAnimationFrame(()=>{this.#d()}))}#d(){this.#n=!1,this.#o=null;let t=this.#i(this.#e),{patch:r,events:n}=fs(this.#t,this.#a,t);if(this.#t=n,this.#a=t,this.#c.push(r),this.#s instanceof he){let i=Xu(this.#s);this.#s=O,queueMicrotask(()=>{this.#n=!0,this.#u(i)})}if(this.#r instanceof he){let i=Xu(this.#r);this.#r=O,requestAnimationFrame(()=>{this.#n=!0,this.#u(i)})}}};function Xu(e){return{synchronous:e,after_paint:O,before_paint:O}}function Ku(e,t){return e instanceof w?t:t instanceof w?e:Le(e,t)}var Tt=class extends _{constructor(t){super(),this.message=t}},er=class extends _{constructor(t,r){super(),this.name=t,this.data=r}};var Ct=class extends _{};var ds=class extends _{constructor(t,r,n,i,s,o,u,l){super(),this.open_shadow_root=t,this.adopt_styles=r,this.attributes=n,this.properties=i,this.is_form_associated=s,this.on_form_autofill=o,this.on_form_reset=u,this.on_form_restore=l}};function Zu(e){let t=new ds(!1,!0,Qr(),Qr(),!1,nn,nn,nn);return Ae(e,t,(r,n)=>n.apply(r))}var _s=class e{static start({init:t,update:r,view:n},i,s){if(!Cr())return new k(new tr);let o=i instanceof HTMLElement?i:Be().querySelector(i);return o?new h(new e(o,t(s),r,n)):new k(new An(i))}#e;constructor(t,[r,n],i,s){this.#e=new Tr(t,[r,n],s,i)}send(t){switch(t.constructor){case Tt:{this.dispatch(t.message,!1);break}case er:{this.emit(t.name,t.data);break}case Ct:break}}dispatch(t,r){this.#e.dispatch(t,r)}emit(t,r){this.#e.emit(t,r)}},el=_s.start;var ms=class extends _{constructor(t,r,n,i){super(),this.init=t,this.update=r,this.view=n,this.config=i}};var An=class extends _{constructor(t){super(),this.selector=t}},tr=class extends _{};function tl(e,t,r){return new ms(e,t,r,Zu(O))}function rl(e,t,r){return ti(!Cr(),new k(new tr),()=>el(e,t,r))}var nl="api",il="current_users";function sl(e){let t=xu(e);return $u("/api/user/register",t,Hi(Ye,n=>new Kt(n)))}function ol(){let e="/"+nl+"/"+il;return hu(e,Hi(wu(),t=>new Qt(t)))}function ic(e,t){let r;e instanceof de?r=e[0]:r=It();let n=r;if(t instanceof h){let i=t[0];return[new Sr(new Xt(i),d([])),ol()]}else return[new de(n),mt()]}function sc(e,t){let r;if(e instanceof de)r=e;else if(t instanceof h){let i=t[0],s=e;r=new Sr(s.current_user,i)}else r=new de(It());return[r,mt()]}function oc(e){let t=Zs(i=>new Xt(i)),r=io(t,e),n=oo(r,"username",ro(no,so));return to(n)}function uc(e,t){let r;e instanceof de?r=e[0]:r=It();let n=r,i=oc(t);if(i instanceof h){let s=i[0];return[new de(n),sl(s)]}else{let s=i[0];return[new de(s),mt()]}}function ul(e,t){if(t instanceof Kt){let r=t[0];return ic(e,r)}else if(t instanceof Qt){let r=t[0];return sc(e,r)}else{let r=t[0];return uc(e,r)}}var ac="src/client.gleam";function ll(){let e=tl(r=>[new de(It()),mt()],ul,Bu),t=rl(e,"#app",void 0);if(!(t instanceof h))throw ir("let_assert",ac,"client",15,"main","Pattern match failed, no pattern matched the value.",{value:t,start:258,end:307,pattern_start:269,pattern_end:274})}ll();
